<!DOCTYPE HTML>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Test SnowProfile</title>
    <link rel="stylesheet" href="file:///usr/lib/node_modules/qunit/node_modules/qunitjs/qunit/qunit.css">
  </head>

  <body>
    <div id="qunit"></div>
    <div id="qunit-fixture">
      <div id="snow_profile_container">
        <div id="snow_profile_diagram"></div>
      </div>
      <div id="snow_profile_descr" title="Snow Layer Description" class="ui-helper-hidden">
	<form>
	  <select id="snow_profile_primary_grain_shape" style="display: block;">
	    <option value=""></option>
	  </select>
	  <div id="snow_profile_primary_grain_subshape"></div>
	  <select id="snow_profile_secondary_grain_shape" style="display: block;">
	    <option value=""></option>
	  </select>
	  <div id="snow_profile_secondary_grain_subshape"></div>
	  <select id="snow_profile_grain_size" style="display: block;">
	    <option value="" selected="selected"></option>
	  </select>
	  <textarea id="snow_profile_comment" columns="30" rows="5"></textarea>
	</form>
      </div>
    </div>
    <script src="/usr/lib/node_modules/qunit/node_modules/qunitjs/qunit/qunit.js"></script>
    <script src="vendor/kinetic-v5.0.1.js"></script>
    <script src="vendor/jquery.js"></script>
    <script src="vendor/jquery.ui.core.min.js"></script>
    <script src="vendor/jquery.ui.widget.min.js"></script>
    <script src="vendor/jquery.ui.mouse.min.js"></script>
    <script src="vendor/jquery.ui.button.min.js"></script>
    <script src="vendor/jquery.ui.dialog.min.js"></script>
    <script src="vendor/jquery.ui.draggable.min.js"></script>
    <script src="vendor/jquery.ui.position.min.js"></script>
    <script src="vendor/jquery.ui.resizable.min.js"></script>
    <script src="snow_profile.js"></script>
    <script src="snow_profile_button.js"></script>
    <script src="snow_profile_popup.js"></script>
    <script src="snow_profile_layer.js"></script>
    <script src="snow_profile_grid.js"></script>
    <script src="snow_profile_main.js"></script>
    <script>
      QUnit.test("Verify needed divs exist", function( assert ) {
        assert.strictEqual($("#snow_profile_container").length, 1,
          "div id=snow_profile_container exists" );
        assert.strictEqual($("#snow_profile_diagram").length, 1,
          "div id=snow_profile_diagram exists" );
        assert.strictEqual($("div.kineticjs-content").length, 1,
          "div class=kineticjs-content exists");
      });
      QUnit.test( "Verify constants exist", function( assert ) {
        assert.ok(SnowProfile.MAX_DEPTH !== undefined,
          "SnowProfile.MAX_DEPTH defined");
        assert.ok(SnowProfile.MIN_DEPTH !== undefined,
          "SnowProfile.MIN_DEPTH defined");
        assert.ok(SnowProfile.DEPTH_LABEL_WD !== undefined,
          "SnowProfile.DEPTH_LABEL_WD defined");
        assert.ok(SnowProfile.DEPTH_LINE_INT !== undefined,
          "SnowProfile.DEPTH_LINE_INT defined");
        assert.ok(SnowProfile.GRAPH_WIDTH !== undefined,
          "SnowProfile.GRAPH_WIDTH defined");
        assert.ok(SnowProfile.CTRLS_WD !== undefined,
          "SnowProfile.CTRLS_WD defined");
        assert.ok(SnowProfile.GRAIN_FORM_WD !== undefined,
          "SnowProfile.GRAIN_FORM_WD defined");
        assert.ok(SnowProfile.GRAIN_SPACE_WD !== undefined,
          "SnowProfile.GRAIN_SPACE_WD defined");
        assert.ok(SnowProfile.GRAIN_SIZE_WD !== undefined,
          "SnowProfile.GRAIN_SIZE_WD defined");
        assert.ok(SnowProfile.COMMENT_SPACE_WD !== undefined,
          "SnowProfile.COMMENT_SPACE_WD defined");
        assert.ok(SnowProfile.COMMENT_WD !== undefined,
          "SnowProfile.COMMENT_WD defined");
        assert.ok(SnowProfile.TOP_LABEL_HT !== undefined,
          "SnowProfile.TOP_LABEL_HT defined");
        assert.ok(SnowProfile.DESCR_HEIGHT !== undefined,
          "SnowProfile.DESCR_HEIGHT defined");
        assert.ok(SnowProfile.HARD_LABEL_HT !== undefined,
          "SnowProfile.HARD_LABEL_HT defined");
        assert.ok(SnowProfile.HANDLE_SIZE !== undefined,
          "SnowProfile.HANDLE_SIZE defined");
        assert.ok(SnowProfile.BACKGROUND_COLOR !== undefined,
          "SnowProfile.BACKGROUND_COLOR defined");
        assert.ok(SnowProfile.LABEL_COLOR !== undefined,
          "SnowProfile.LABEL_COLOR defined");
        assert.ok(SnowProfile.GRID_COLOR !== undefined,
          "SnowProfile.GRID_COLOR defined");
        assert.ok(SnowProfile.DEPTH_SCALE !== undefined,
          "SnowProfile.DEPTH_SCALE defined");
        assert.ok(SnowProfile.INS_INCR !== undefined,
          "SnowProfile.INS_INCR defined");
        assert.ok(SnowProfile.IMAGE_WD !== undefined,
          "SnowProfile.IMAGE_WD defined");
        assert.ok(SnowProfile.kineticJSLayer !== undefined,
          "SnowProfile.kineticJSLayer defined");
        assert.ok(SnowProfile.snowLayers !== undefined,
          "SnowProfile.snowLayers defined");
        assert.ok(SnowProfile.showHandle !== undefined,
          "SnowProfile.showHandle defined");
        assert.ok(SnowProfile.oldShowHandle !== undefined,
          "SnowProfile.oldShowHandle defined");
        assert.ok(SnowProfile.handleMaxY !== undefined,
          "SnowProfile.handleMaxY defined");
        assert.ok(SnowProfile.totalDepth !== undefined,
          "SnowProfile.totalDepth defined");
        assert.ok(SnowProfile.depthRef !== undefined,
          "SnowProfile.depthRef defined");
        assert.ok(SnowProfile.CAAML_SHAPE !== undefined,
          "SnowProfile.CAAML_SHAPE defined");
        assert.ok(SnowProfile.CAAML_SUBSHAPE !== undefined,
          "SnowProfile.CAAML_SUBSHAPE defined");
        assert.ok(SnowProfile.CAAML_SIZE !== undefined,
          "SnowProfile.CAAML_SIZE defined");
        assert.ok(SnowProfile.pitDepth !== undefined,
          "SnowProfile.pitDepth defined");
        assert.ok(SnowProfile.GRAPH_CENTER_X !== undefined,
          "SnowProfile.GRAPH_CENTER_X defined");
        assert.ok(SnowProfile.HANDLE_MAX_X !== undefined,
          "SnowProfile.HANDLE_MAX_X defined");
        assert.ok(SnowProfile.HANDLE_MIN_X !== undefined,
          "SnowProfile.HANDLE_MIN_X defined");
        assert.ok(SnowProfile.HANDLE_MIN_Y !== undefined,
          "SnowProfile.HANDLE_MIN_Y defined");
        assert.ok(SnowProfile.HARD_BAND_WD !== undefined,
          "SnowProfile.HARD_BAND_WD defined");
        assert.ok(SnowProfile.CAAML_HARD !== undefined,
          "SnowProfile.CAAML_HARD defined");
        assert.ok(SnowProfile.STAGE_WD !== undefined,
          "SnowProfile.STAGE_WD defined");
        assert.ok(SnowProfile.BUTTON_X !== undefined,
          "SnowProfile.BUTTON_X defined");
        assert.ok(SnowProfile.GRAIN_LEFT !== undefined,
          "SnowProfile.GRAIN_LEFT defined");
        assert.ok(SnowProfile.COMMENT_LEFT !== undefined,
          "SnowProfile.COMMENT_LEFT defined");
        assert.ok(SnowProfile.stage !== undefined,
          "SnowProfile.stage defined");
        console.log("hello world");
        assert.equal(Object.keys(SnowProfile.CAAML_SHAPE).length + 1,
          $("#snow_profile_primary_grain_shape option").length,
          "primary grain shape select options present");
      });
      QUnit.test( "Test basic SnowProfile functions", function( assert ) {
        assert.equal(SnowProfile.lineBelowY(17),
          SnowProfile.HANDLE_MIN_Y + (SnowProfile.HANDLE_SIZE / 2) +
          (18 * SnowProfile.DESCR_HEIGHT),
         "SnowProfile.lineBelowY() works");
        // @todo Test stageHeight()
        assert.equal(SnowProfile.depth2y(17),
          (17 * SnowProfile.DEPTH_SCALE) + SnowProfile.HANDLE_MIN_Y,
          "SnowProfile.depth2y() works");
        // @todo Test setIndexPositions
        // @todo Test preview
        // @todo Test init
      });
    </script>
  </body>
</html>
