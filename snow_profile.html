<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-15">
<title>Snow Profile</title>
</head>

<body>
<h1>Snow Profile</h1>
<div id="snow_profile_diagram"></div>
<script src="kinetic-v4.7.2.min.js"></script>
<script defer="defer">
  var stage = new Kinetic.Stage({
    container: 'snow_profile_diagram',
    width: 500,
    height: 500
  });

  // Vertical height in pixels of the hardness (horizontal) axis label
  var hard_label_ht = 40;

  // Horizontal width in pixels of the depth (vertical) axis label
  var depth_label_wd = 40;

  // Width available for plotting data
  var graph_width = stage.getWidth() - depth_label_wd - 1;

  // Center x of the data plotting area
  var graph_center_x = depth_label_wd + 1 + (graph_width / 2);

  // Height available for plotting data
  var graph_height = stage.getHeight() - hard_label_ht - 1;

  // Center y of the data plotting area
  var graph_center_y = (graph_height / 2);

  var layer = new Kinetic.Layer();

  // Draw and label the depth (vertical) axis
  layer.add(new Kinetic.Line({
    points: [depth_label_wd, 0, depth_label_wd, graph_height + 1],
    stroke: '#000'
  }));
  for (var j = 0; j < graph_height; j += 50) {
    layer.add(new Kinetic.Text({
      x: 10,
      y: j,
      text: j/2.5,
      fontSize: 12,
      fontStyle: 'bold',
      fontFamily: 'sans-serif',
      fill: '#000',
      align: 'right'
    }));
    if (j) {
      layer.add(new Kinetic.Line({
        points: [depth_label_wd + 1, j + 1, stage.getWidth(), j],
        stroke: '#ddd'
      }));
    }
  }

  // Draw and label the hardness (horizontal) axis
  layer.add(new Kinetic.Line({
    points: [depth_label_wd, graph_height + 1,
             stage.getWidth(), graph_height + 1],
    stroke: '#000'
  }));

  // Table of CAAML hardness values (HardnessBaseEnumType)
  var caaml_hard = [
    ['F-',    0],
    ['F',     1],
    ['F+',    0],
    ['F-4F',  0],
    ['4F-',   0],
    ['4F',    1],
    ['4F+',   0],
    ['4F-1F', 0],
    ['1F-',   0],
    ['1F',    1],
    ['1F+',   0],
    ['1F-P',  0],
    ['P-',    0],
    ['P',     1],
    ['P+',    0],
    ['P-K',   0],
    ['K-',    0],
    ['K',     1],
    ['K+',    0],
    ['K-I',   0],
    ['I',     1],
  ];
  var hard_band_width = graph_width/caaml_hard.length;
  for (var i = 0; i < caaml_hard.length; i++) {
    var x = depth_label_wd + 1 + (hard_band_width / 2) + (hard_band_width * i);
    if (caaml_hard[i][1]) {
      layer.add(new Kinetic.Line({
        points: [x, 0, x, stage.getHeight() - hard_label_ht - 1],
        stroke: '#ddd'
      }));
      layer.add(new Kinetic.Text({
        x: x,
        y: stage.getHeight() - hard_label_ht + 10,
        text: caaml_hard[i][0],
        fontSize: 12,
        fontStyle: 'bold',
        fontFamily: 'sans-serif',
        fill: '#000',
        align: 'center'
      }));
    };
  }
  var hardness_text = new Kinetic.Text({
    x: graph_center_x,
    y: stage.getHeight() - 14,
    text: 'Hardness',
    fontSize: 18,
    fontStyle: 'bold',
    fontFamily: 'sans-serif',
    fill: '#000',
    align: 'center'
  });
  hardness_text.setOffsetX(hardness_text.getWidth() / 2 );
  layer.add(hardness_text);

 // add the layer to the stage
 stage.add(layer);
</script>
</body> </html>
